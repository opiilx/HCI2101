<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ù„Ø¹Ø¨Ø© XO Ø§Ù„Ø­Ø¯ÙŠØ«Ø© (Ø¥ÙƒØ³-Ø£Ùˆ)</title>
  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#101a3a;
      --card: rgba(255,255,255,.08);
      --card2: rgba(255,255,255,.12);
      --text:#eef2ff;
      --muted:#c7d2fe;
      --shadow: 0 20px 60px rgba(0,0,0,.35);
      --border: 1px solid rgba(255,255,255,.14);
      --glow: 0 0 0 4px rgba(99,102,241,.18);
      --x:#22c55e;
      --o:#f97316;
      --accent:#6366f1;
      --danger:#ef4444;
      --ok:#10b981;
      --grid: rgba(255,255,255,.14);
      --radius: 22px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Tahoma, Arial, sans-serif;
      color: var(--text);
      background:
        radial-gradient(1200px 600px at 10% 10%, rgba(99,102,241,.35), transparent 60%),
        radial-gradient(900px 500px at 90% 30%, rgba(34,197,94,.25), transparent 55%),
        radial-gradient(900px 700px at 60% 110%, rgba(249,115,22,.22), transparent 55%),
        linear-gradient(160deg, var(--bg1), var(--bg2));
      display:flex;
      align-items:stretch;
      justify-content:center;
    }

    .app{
      width:min(980px, 100%);
      padding: 18px 16px 82px;
      display:flex;
      flex-direction:column;
      gap: 14px;
      position:relative;
    }

    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 14px 16px;
      border: var(--border);
      border-radius: var(--radius);
      background: linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
    }
    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      min-width: 180px;
    }
    .logo{
      width:44px;height:44px;
      border-radius: 14px;
      display:grid;
      place-items:center;
      background: linear-gradient(135deg, rgba(99,102,241,.9), rgba(34,197,94,.65));
      box-shadow: 0 10px 25px rgba(0,0,0,.25);
      border: 1px solid rgba(255,255,255,.18);
      position:relative;
      overflow:hidden;
    }
    .logo::after{
      content:"";
      position:absolute; inset:-40%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.35), transparent);
      transform: rotate(25deg);
      animation: shine 4.2s infinite linear;
    }
    @keyframes shine{
      0%{ transform: translateX(-40%) rotate(25deg); opacity:.0;}
      20%{opacity:.55;}
      50%{opacity:.25;}
      100%{ transform: translateX(40%) rotate(25deg); opacity:0;}
    }

    .brand h1{
      margin:0;
      font-size: 18px;
      letter-spacing:.2px;
      line-height:1.2;
    }
    .brand p{
      margin:2px 0 0;
      font-size: 12px;
      color: var(--muted);
      opacity:.95;
    }

    .top-actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
      align-items:center;
    }

    .pill{
      display:flex;
      align-items:center;
      gap:8px;
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.08);
      border: var(--border);
      color: var(--text);
      font-size: 13px;
      user-select:none;
      white-space:nowrap;
    }
    .dot{
      width:10px;height:10px;border-radius:50%;
      background: var(--accent);
      box-shadow: 0 0 0 4px rgba(99,102,241,.18);
    }

    .btn{
      appearance:none;
      border: none;
      border-radius: 14px;
      padding: 12px 14px;
      font-weight: 700;
      color: var(--text);
      background: linear-gradient(135deg, rgba(99,102,241,.95), rgba(99,102,241,.65));
      box-shadow: 0 14px 30px rgba(0,0,0,.25);
      cursor:pointer;
      transition: transform .12s ease, filter .12s ease;
      display:inline-flex;
      align-items:center;
      gap:10px;
      outline:none;
    }
    .btn:active{ transform: translateY(1px) scale(.99); }
    .btn:hover{ filter: brightness(1.05); }
    .btn.secondary{
      background: rgba(255,255,255,.10);
      border: var(--border);
      box-shadow:none;
      font-weight:700;
    }
    .btn.danger{
      background: linear-gradient(135deg, rgba(239,68,68,.95), rgba(239,68,68,.65));
    }
    .btn:focus-visible{ box-shadow: var(--shadow), var(--glow); }

    main{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:14px;
      align-items:start;
    }

    @media (max-width: 880px){
      main{ grid-template-columns: 1fr; }
      .brand{ min-width:auto; }
      .top-actions{ justify-content:flex-start; }
    }

    .card{
      border: var(--border);
      border-radius: var(--radius);
      background: linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      overflow:hidden;
      position:relative;
    }
    .card .inner{
      padding: 16px;
    }

    .status{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:space-between;
      align-items:flex-start;
    }
    .status .block{
      flex:1;
      min-width: 210px;
      padding: 12px;
      border-radius: 18px;
      border: var(--border);
      background: rgba(255,255,255,.06);
    }
    .k{
      font-size: 12px;
      color: var(--muted);
      opacity:.95;
      margin:0 0 6px;
    }
    .v{
      margin:0;
      font-size: 14px;
      font-weight: 800;
      display:flex;
      align-items:center;
      gap:8px;
      flex-wrap:wrap;
    }
    .badge{
      padding: 6px 10px;
      border-radius:999px;
      border: var(--border);
      background: rgba(255,255,255,.08);
      font-size: 12px;
      font-weight:900;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    .badge.x{ border-color: rgba(34,197,94,.35); }
    .badge.o{ border-color: rgba(249,115,22,.35); }
    .mark{
      width:18px;height:18px;border-radius:6px;
      display:grid;place-items:center;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.16);
      font-weight: 1000;
      font-size: 12px;
    }
    .mark.x{ color: var(--x); }
    .mark.o{ color: var(--o); }

    .board-wrap{
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .board{
      width:100%;
      aspect-ratio: 1 / 1;
      max-height: 520px;
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      padding: 10px;
      border-radius: 22px;
      border: var(--border);
      background: rgba(255,255,255,.06);
      position:relative;
      overflow:hidden;
    }
    .cell{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.08);
      display:grid;
      place-items:center;
      font-size: clamp(42px, 8vw, 74px);
      font-weight: 1000;
      cursor:pointer;
      user-select:none;
      transition: transform .10s ease, background .15s ease, border-color .15s ease;
      position:relative;
    }
    .cell:hover{
      background: rgba(255,255,255,.12);
      border-color: rgba(255,255,255,.22);
      transform: translateY(-1px);
    }
    .cell.disabled{
      cursor:not-allowed;
      opacity:.9;
    }
    .cell.win{
      border-color: rgba(16,185,129,.55);
      background: rgba(16,185,129,.14);
      box-shadow: 0 0 0 4px rgba(16,185,129,.12) inset;
    }
    .xTxt{ color: var(--x); text-shadow: 0 10px 30px rgba(34,197,94,.22); }
    .oTxt{ color: var(--o); text-shadow: 0 10px 30px rgba(249,115,22,.22); }

    .hint{
      font-size: 13px;
      color: var(--muted);
      opacity:.95;
      margin:0;
      line-height:1.6;
    }

    /* Right panel */
    .panel h2{
      margin:0 0 10px;
      font-size: 16px;
      letter-spacing:.2px;
    }
    .rows{
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .mini{
      flex:1;
      min-width: 160px;
      border-radius: 18px;
      border: var(--border);
      background: rgba(255,255,255,.06);
      padding: 12px;
    }
    .mini .title{
      margin:0 0 6px;
      font-size: 12px;
      color: var(--muted);
      opacity:.95;
    }
    .mini .big{
      margin:0;
      font-size: 18px;
      font-weight: 1000;
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }
    .spark{
      width:10px;height:10px;border-radius:50%;
      background: rgba(255,255,255,.35);
      box-shadow: 0 0 0 4px rgba(255,255,255,.10);
    }
    .spark.x{ background: var(--x); box-shadow: 0 0 0 4px rgba(34,197,94,.18); }
    .spark.o{ background: var(--o); box-shadow: 0 0 0 4px rgba(249,115,22,.18); }

    .toast{
      margin-top:10px;
      padding: 12px;
      border-radius: 18px;
      border: var(--border);
      background: rgba(255,255,255,.07);
      line-height:1.7;
      font-size: 13px;
      color: var(--text);
    }
    .toast strong{ font-weight: 1000; }
    .toast.good{
      border-color: rgba(16,185,129,.28);
      background: rgba(16,185,129,.10);
    }
    .toast.bad{
      border-color: rgba(239,68,68,.25);
      background: rgba(239,68,68,.08);
    }

    /* Start screen modal */
    .overlay{
      position:fixed; inset:0;
      background: rgba(0,0,0,.55);
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 18px;
      z-index: 50;
    }
    .modal{
      width:min(860px, 100%);
      border-radius: 26px;
      border: 1px solid rgba(255,255,255,.18);
      background: linear-gradient(135deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
      box-shadow: 0 30px 90px rgba(0,0,0,.55);
      backdrop-filter: blur(14px);
      overflow:hidden;
      position:relative;
    }
    .modal .content{
      padding: 18px;
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap: 14px;
      align-items:stretch;
    }
    @media (max-width: 880px){
      .modal .content{ grid-template-columns: 1fr; }
    }
    .hero{
      border-radius: 22px;
      padding: 16px;
      border: var(--border);
      background:
        radial-gradient(520px 260px at 20% 20%, rgba(99,102,241,.38), transparent 65%),
        radial-gradient(520px 260px at 80% 60%, rgba(34,197,94,.28), transparent 62%),
        rgba(255,255,255,.06);
      min-height: 220px;
      position:relative;
      overflow:hidden;
    }
    .hero h2{
      margin:0 0 6px;
      font-size: 20px;
      letter-spacing:.2px;
    }
    .hero p{
      margin:0;
      color: var(--muted);
      line-height:1.8;
      font-size: 13px;
      opacity:.95;
    }
    .hero .chips{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 12px;
    }
    .chip{
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.08);
      font-size: 12px;
      font-weight: 900;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }

    .form{
      border-radius: 22px;
      border: var(--border);
      background: rgba(255,255,255,.06);
      padding: 16px;
    }
    .form h3{
      margin:0 0 10px;
      font-size: 16px;
    }
    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    @media (max-width: 520px){
      .grid{ grid-template-columns: 1fr; }
    }
    label{
      display:flex;
      flex-direction:column;
      gap:6px;
      font-size: 12px;
      color: var(--muted);
    }
    input[type="text"]{
      width:100%;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.20);
      color: var(--text);
      outline:none;
      transition: box-shadow .12s ease, border-color .12s ease;
    }
    input[type="text"]::placeholder{ color: rgba(199,210,254,.65); }
    input[type="text"]:focus{
      border-color: rgba(99,102,241,.55);
      box-shadow: var(--glow);
    }

    .mode{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin: 10px 0 12px;
    }
    .toggle{
      flex:1;
      min-width: 180px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 12px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
      cursor:pointer;
      user-select:none;
      transition: transform .10s ease, border-color .12s ease, background .12s ease;
    }
    .toggle:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.22); background: rgba(255,255,255,.10); }
    .toggle.active{
      border-color: rgba(99,102,241,.55);
      background: rgba(99,102,241,.16);
      box-shadow: 0 0 0 4px rgba(99,102,241,.12) inset;
    }
    .toggle .t-title{
      font-weight: 1000;
      font-size: 13px;
      margin:0;
    }
    .toggle .t-sub{
      margin:2px 0 0;
      font-size: 12px;
      color: var(--muted);
      opacity:.95;
    }
    .toggle .icon{
      width:36px;height:36px;border-radius: 14px;
      display:grid;place-items:center;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.08);
      font-weight: 1000;
    }

    .form .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 10px;
    }
    .help{
      margin:10px 0 0;
      font-size: 12px;
      color: var(--muted);
      line-height:1.7;
      opacity:.95;
    }

    /* Footer fixed */
    footer{
      position:fixed;
      left:0; right:0; bottom:0;
      z-index: 40;
      padding: 10px 12px;
      background: rgba(10,14,28,.72);
      border-top: 1px solid rgba(255,255,255,.12);
      backdrop-filter: blur(12px);
    }
    .footer-inner{
      width:min(980px, 100%);
      margin: 0 auto;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
      color: rgba(238,242,255,.95);
      font-size: 12px;
    }
    .footer-inner b{ font-weight: 1000; }
    .sep{ opacity:.55; }

    /* Small utility */
    .hide{ display:none !important; }
    .sr-only{
      position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0;
    }
  </style>
</head>
<body>
  <div class="app" id="app">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true">
          <span style="font-weight:1000;">XO</span>
        </div>
        <div>
          <h1>Ù„Ø¹Ø¨Ø© Ø¥ÙƒØ³-Ø£Ùˆ Ø§Ù„Ø­Ø¯ÙŠØ«Ø©</h1>
          <p>Ø§Ø®ØªØ± Ù„Ø§Ø¹Ø¨ ÙˆØ§Ø­Ø¯ Ø£Ùˆ Ù„Ø§Ø¹Ø¨ÙŠÙ†ØŒ ÙˆØªÙ†Ø§ÙØ³ÙˆØ§ Ø¹Ù„Ù‰ 3Ã—3 Ø¨ØªØµÙ…ÙŠÙ… Ø¹ØµØ±ÙŠ.</p>
        </div>
      </div>

      <div class="top-actions">
        <div class="pill" id="modePill" title="ÙˆØ¶Ø¹ Ø§Ù„Ù„Ø¹Ø¨">
          <span class="dot" aria-hidden="true"></span>
          <span id="modeText">Ø§Ù„ÙˆØ¶Ø¹: â€”</span>
        </div>
        <button class="btn secondary" id="btnNew">Ø¨Ø¯Ø¡ Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
        <button class="btn danger" id="btnReset">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·</button>
      </div>
    </header>

    <main>
      <!-- Left: Board -->
      <section class="card">
        <div class="inner board-wrap">
          <div class="status">
            <div class="block">
              <p class="k">Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠ</p>
              <p class="v" id="turnLine">â€”</p>
            </div>
            <div class="block">
              <p class="k">Ø§Ù„Ù†ØªÙŠØ¬Ø©</p>
              <p class="v" id="scoreLine">â€”</p>
            </div>
          </div>

          <div class="board" id="board" aria-label="Ù„ÙˆØ­Ø© Ù„Ø¹Ø¨Ø© Ø¥ÙƒØ³-Ø£Ùˆ">
            <!-- cells injected -->
          </div>

          <p class="hint" id="hint">
            ØªÙ„Ù…ÙŠØ­: ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„ÙˆØ§Ø­Ø¯ØŒ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ÙŠÙ„Ø¹Ø¨ Ø¨Ù€ <b style="color:var(--o)">O</b> Ø¨Ø¹Ø¯ Ø¯ÙˆØ±Ùƒ Ù…Ø¨Ø§Ø´Ø±Ø©.
          </p>
        </div>
      </section>

      <!-- Right: Panel -->
      <aside class="card panel">
        <div class="inner">
          <h2>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>

          <div class="rows">
            <div class="row">
              <div class="mini">
                <p class="title">Ø§Ù„Ù„Ø§Ø¹Ø¨ (X)</p>
                <p class="big"><span class="spark x" aria-hidden="true"></span> <span id="p1Name">â€”</span></p>
              </div>
              <div class="mini">
                <p class="title">Ø§Ù„Ù„Ø§Ø¹Ø¨ (O)</p>
                <p class="big"><span class="spark o" aria-hidden="true"></span> <span id="p2Name">â€”</span></p>
              </div>
            </div>

            <div class="row">
              <div class="mini">
                <p class="title">Ø§Ù„ÙØ§Ø¦Ø²ÙˆÙ†</p>
                <p class="big" id="winsLine">â€”</p>
              </div>
              <div class="mini">
                <p class="title">Ø§Ù„ØªØ¹Ø§Ø¯Ù„</p>
                <p class="big" id="drawsLine">â€”</p>
              </div>
            </div>

            <div class="toast" id="toast">
              Ø§Ø¨Ø¯Ø£ Ù…Ù† Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ÙˆØ§Ø®ØªÙŠØ§Ø± ÙˆØ¶Ø¹ Ø§Ù„Ù„Ø¹Ø¨.
            </div>

            <div class="row">
              <button class="btn" id="btnReplay" style="flex:1;">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¬ÙˆÙ„Ø©</button>
              <button class="btn secondary" id="btnChangeNames" style="flex:1;">ØªØºÙŠÙŠØ± Ø§Ù„Ø£Ø³Ù…Ø§Ø¡</button>
            </div>

            <p class="hint">
              Ù‚ÙˆØ§Ø¹Ø¯ Ø³Ø±ÙŠØ¹Ø©: ØµÙ/Ø¹Ù…ÙˆØ¯/Ù‚Ø·Ø± = ÙÙˆØ². Ø¥Ø°Ø§ Ø§Ù…ØªÙ„Ø£Øª Ø§Ù„Ù„ÙˆØ­Ø© Ø¨Ø¯ÙˆÙ† ÙØ§Ø¦Ø² = ØªØ¹Ø§Ø¯Ù„.
            </p>
          </div>
        </div>
      </aside>
    </main>
  </div>

  <!-- Start Screen -->
  <div class="overlay" id="startOverlay" role="dialog" aria-modal="true" aria-label="Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©">
    <div class="modal">
      <div class="content">
        <div class="hero">
          <h2>Ø¬Ø§Ù‡Ø² ØªØ¨Ø¯Ø£ØŸ ğŸ®</h2>
          <p>
            Ù„Ø¹Ø¨Ø© Ø¥ÙƒØ³-Ø£Ùˆ Ø¨ØªØµÙ…ÙŠÙ… Ø­Ø¯ÙŠØ« ÙˆØ³Ù„Ø³. Ø§Ø®ØªØ± ÙˆØ¶Ø¹ Ù„Ø§Ø¹Ø¨ ÙˆØ§Ø­Ø¯ Ø£Ùˆ Ù„Ø§Ø¹Ø¨ÙŠÙ†ØŒ
            ÙˆØ§ÙƒØªØ¨ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†ØŒ Ø«Ù… Ø§Ø¶ØºØ· "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©".
          </p>
          <div class="chips">
            <div class="chip">âœ… ØªØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù„ ÙˆØ§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±</div>
            <div class="chip">âš¡ Ø¬ÙˆÙ„Ø§Øª Ø³Ø±ÙŠØ¹Ø©</div>
            <div class="chip">ğŸ¤– Ø®ØµÙ… ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ø°ÙƒÙŠ</div>
          </div>
        </div>

        <div class="form">
          <h3>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©</h3>

          <div class="mode" aria-label="Ø§Ø®ØªÙŠØ§Ø± ÙˆØ¶Ø¹ Ø§Ù„Ù„Ø¹Ø¨">
            <div class="toggle active" id="toggle1" tabindex="0" role="button" aria-pressed="true">
              <div>
                <p class="t-title">Ù„Ø§Ø¹Ø¨ ÙˆØ§Ø­Ø¯</p>
                <p class="t-sub">Ø£Ù†Øª Ø¶Ø¯ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±</p>
              </div>
              <div class="icon" aria-hidden="true">1</div>
            </div>

            <div class="toggle" id="toggle2" tabindex="0" role="button" aria-pressed="false">
              <div>
                <p class="t-title">Ù„Ø§Ø¹Ø¨Ø§Ù†</p>
                <p class="t-sub">ØªÙ†Ø§ÙØ³ Ù…Ø¹ ØµØ¯ÙŠÙ‚Ùƒ</p>
              </div>
              <div class="icon" aria-hidden="true">2</div>
            </div>
          </div>

          <div class="grid">
            <label>
              Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙˆÙ„ (X)
              <input type="text" id="name1" maxlength="18" placeholder="Ù…Ø«Ø§Ù„: Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡" />
            </label>
            <label>
              Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø«Ø§Ù†ÙŠ (O)
              <input type="text" id="name2" maxlength="18" placeholder="Ù…Ø«Ø§Ù„: Ù…ÙˆØ¯Ø© / Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±" />
            </label>
          </div>

          <div class="actions">
            <button class="btn" id="btnStart" style="flex:1;">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
            <button class="btn secondary" id="btnDemo" style="flex:1;">ØªØ¹Ø¨Ø¦Ø© Ø£Ø³Ù…Ø§Ø¡ Ø³Ø±ÙŠØ¹Ø©</button>
          </div>

          <p class="help">
            Ù…Ù„Ø§Ø­Ø¸Ø©: ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„ÙˆØ§Ø­Ø¯ØŒ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø«Ø§Ù†ÙŠ ÙŠØµØ¨Ø­ <b>Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±</b> ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¥Ø°Ø§ ØªØ±ÙƒØª Ø§Ø³Ù…Ù‡ ÙØ§Ø±ØºÙ‹Ø§.
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Mandatory Footer -->
  <footer>
    <div class="footer-inner">
      <div>
        <b>Student Name:</b> ABDULLAH HUSSAIN ABDULLAH ABDULSAMAD (Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø­Ø³ÙŠÙ† Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¹Ø¨Ø¯Ø§Ù„ØµÙ…Ø¯)
        <span class="sep"> | </span>
        <b>Student ID:</b> 446006565
      </div>
      <div>
        <b>Supervised by:</b> Mohammed Ahmed Jabali
      </div>
    </div>
  </footer>

  <script>
    // =============================
    // Ù„Ø¹Ø¨Ø© XO (Ø¥ÙƒØ³-Ø£Ùˆ) - Ù…Ù„Ù ÙˆØ§Ø­Ø¯
    // =============================

    // Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
    const startOverlay = document.getElementById("startOverlay");
    const toggle1 = document.getElementById("toggle1");
    const toggle2 = document.getElementById("toggle2");
    const name1Input = document.getElementById("name1");
    const name2Input = document.getElementById("name2");
    const btnStart = document.getElementById("btnStart");
    const btnDemo = document.getElementById("btnDemo");

    const boardEl = document.getElementById("board");
    const turnLine = document.getElementById("turnLine");
    const scoreLine = document.getElementById("scoreLine");
    const winsLine = document.getElementById("winsLine");
    const drawsLine = document.getElementById("drawsLine");
    const p1NameEl = document.getElementById("p1Name");
    const p2NameEl = document.getElementById("p2Name");
    const toast = document.getElementById("toast");
    const modeText = document.getElementById("modeText");
    const hint = document.getElementById("hint");

    const btnReplay = document.getElementById("btnReplay");
    const btnChangeNames = document.getElementById("btnChangeNames");
    const btnNew = document.getElementById("btnNew");
    const btnReset = document.getElementById("btnReset");

    // Ø­Ø§Ù„Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
    const state = {
      mode: 1, // 1 = Ù„Ø§Ø¹Ø¨ ÙˆØ§Ø­Ø¯ØŒ 2 = Ù„Ø§Ø¹Ø¨Ø§Ù†
      players: {
        X: "â€”",
        O: "â€”",
      },
      board: Array(9).fill(""),
      turn: "X",
      locked: false,
      stats: {
        X: 0,
        O: 0,
        draws: 0
      }
    };

    // Ù…ØµÙÙˆÙØ§Øª Ø§Ù„ÙÙˆØ²
    const WIN_LINES = [
      [0,1,2],[3,4,5],[6,7,8],
      [0,3,6],[1,4,7],[2,5,8],
      [0,4,8],[2,4,6]
    ];

    // ==============
    // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù„ÙˆØ­Ø©
    // ==============
    function buildBoard(){
      boardEl.innerHTML = "";
      for(let i=0;i<9;i++){
        const btn = document.createElement("button");
        btn.className = "cell";
        btn.type = "button";
        btn.setAttribute("aria-label", `Ø®Ø§Ù†Ø© Ø±Ù‚Ù… ${i+1}`);
        btn.dataset.idx = String(i);
        btn.addEventListener("click", () => handleMove(i));
        boardEl.appendChild(btn);
      }
    }

    // ==============
    // ÙˆØ§Ø¬Ù‡Ø© Ù…Ø­Ø¯Ø«Ø©
    // ==============
    function render(){
      // Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†
      p1NameEl.textContent = state.players.X;
      p2NameEl.textContent = state.players.O;

      // Ø¹Ø±Ø¶ Ø§Ù„ÙˆØ¶Ø¹
      modeText.textContent = `Ø§Ù„ÙˆØ¶Ø¹: ${state.mode === 1 ? "Ù„Ø§Ø¹Ø¨ ÙˆØ§Ø­Ø¯" : "Ù„Ø§Ø¹Ø¨Ø§Ù†"}`;
      hint.classList.toggle("hide", state.mode !== 1);

      // Ø¹Ø±Ø¶ Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠ
      const currentName = state.turn === "X" ? state.players.X : state.players.O;
      const badge = state.turn === "X"
        ? `<span class="badge x"><span class="mark x">X</span> Ø§Ù„Ø¯ÙˆØ± Ù„Ù€ ${escapeHtml(currentName)}</span>`
        : `<span class="badge o"><span class="mark o">O</span> Ø§Ù„Ø¯ÙˆØ± Ù„Ù€ ${escapeHtml(currentName)}</span>`;
      turnLine.innerHTML = badge;

      // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
      scoreLine.innerHTML =
        `<span class="badge x"><span class="mark x">X</span> ${state.stats.X}</span>
         <span class="badge o"><span class="mark o">O</span> ${state.stats.O}</span>
         <span class="badge"><span class="mark">â‰¡</span> ØªØ¹Ø§Ø¯Ù„ ${state.stats.draws}</span>`;

      winsLine.textContent = `${state.players.X}: ${state.stats.X} | ${state.players.O}: ${state.stats.O}`;
      drawsLine.textContent = `${state.stats.draws}`;

      // ØªØ­Ø¯ÙŠØ« Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ù„ÙˆØ­Ø©
      const cells = boardEl.querySelectorAll(".cell");
      cells.forEach((cell, i) => {
        const v = state.board[i];
        cell.textContent = v;
        cell.classList.toggle("disabled", state.locked || v !== "");
        cell.classList.remove("win");
        cell.classList.remove("xTxt", "oTxt");
        if(v === "X") cell.classList.add("xTxt");
        if(v === "O") cell.classList.add("oTxt");
      });
    }

    function setToast(message, kind = "normal"){
      toast.classList.remove("good", "bad");
      if(kind === "good") toast.classList.add("good");
      if(kind === "bad") toast.classList.add("bad");
      toast.innerHTML = message;
    }

    // ==============
    // ØªØ­ÙƒÙ… Ø§Ù„ÙˆØ¶Ø¹
    // ==============
    function setMode(mode){
      state.mode = mode;
      toggle1.classList.toggle("active", mode === 1);
      toggle2.classList.toggle("active", mode === 2);
      toggle1.setAttribute("aria-pressed", String(mode === 1));
      toggle2.setAttribute("aria-pressed", String(mode === 2));

      if(mode === 1){
        name2Input.placeholder = "Ù…Ø«Ø§Ù„: Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±";
      }else{
        name2Input.placeholder = "Ù…Ø«Ø§Ù„: Ù…ÙˆØ¯Ø©";
      }
    }

    toggle1.addEventListener("click", () => setMode(1));
    toggle2.addEventListener("click", () => setMode(2));
    toggle1.addEventListener("keydown", (e)=>{ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); setMode(1);} });
    toggle2.addEventListener("keydown", (e)=>{ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); setMode(2);} });

    // ==============
    // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
    // ==============
    function startGameFromForm(){
      const n1 = (name1Input.value || "").trim();
      const n2 = (name2Input.value || "").trim();

      state.players.X = n1 ? n1 : "Ø§Ù„Ù„Ø§Ø¹Ø¨ 1";
      if(state.mode === 1){
        state.players.O = n2 ? n2 : "Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±";
      }else{
        state.players.O = n2 ? n2 : "Ø§Ù„Ù„Ø§Ø¹Ø¨ 2";
      }

      // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¬ÙˆÙ„Ø© (Ø¨Ø¯ÙˆÙ† ØªØµÙÙŠØ± Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª)
      resetRound();

      // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
      startOverlay.classList.add("hide");

      setToast(
        `Ø§Ø¨Ø¯Ø£Ù†Ø§! ${state.players.X} ÙŠÙ„Ø¹Ø¨ Ø¨Ù€ <b style="color:var(--x)">X</b> Ùˆ ${state.players.O} ÙŠÙ„Ø¹Ø¨ Ø¨Ù€ <b style="color:var(--o)">O</b>.`,
        "good"
      );

      render();
    }

    btnStart.addEventListener("click", startGameFromForm);

    btnDemo.addEventListener("click", () => {
      // Ø£Ø³Ù…Ø§Ø¡ Ø¹Ø±Ø¨ÙŠØ© Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„ØªØ¬Ø±Ø¨Ø©
      name1Input.value = "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡";
      name2Input.value = state.mode === 1 ? "Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±" : "Ù…ÙˆØ¯Ø©";
      setToast("ØªÙ…Øª ØªØ¹Ø¨Ø¦Ø© Ø£Ø³Ù…Ø§Ø¡ Ø³Ø±ÙŠØ¹Ø© âœ… Ø§Ø¶ØºØ· Â«Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©Â».", "good");
    });

    // ==============
    // Ù…Ù†Ø·Ù‚ Ø§Ù„Ù„Ø¹Ø¨
    // ==============
    function handleMove(idx){
      if(state.locked) return;
      if(state.board[idx] !== "") return;

      // ÙÙŠ ÙˆØ¶Ø¹ Ù„Ø§Ø¹Ø¨ ÙˆØ§Ø­Ø¯: ÙŠÙ…Ù†Ø¹ Ù„Ø¹Ø¨ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ø¨Ø§Ù„Ø¶ØºØ·
      if(state.mode === 1 && state.turn === "O") return;

      placeMark(idx, state.turn);

      const res = evaluateBoard();
      if(res.over){
        endRound(res);
        return;
      }

      // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¯ÙˆØ±
      state.turn = state.turn === "X" ? "O" : "X";
      render();

      // Ø¯ÙˆØ± Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±
      if(state.mode === 1 && state.turn === "O"){
        state.locked = true;
        render();
        setTimeout(() => {
          const aiIdx = computeBestMove();
          placeMark(aiIdx, "O");
          const res2 = evaluateBoard();
          if(res2.over){
            endRound(res2);
            return;
          }
          state.turn = "X";
          state.locked = false;
          render();
        }, 450);
      }
    }

    function placeMark(idx, mark){
      state.board[idx] = mark;
      const cell = boardEl.querySelector(`.cell[data-idx="${idx}"]`);
      if(cell){
        cell.textContent = mark;
        cell.classList.add(mark === "X" ? "xTxt" : "oTxt");
      }
    }

    function evaluateBoard(){
      // ÙØ­Øµ ÙØ§Ø¦Ø²
      for(const line of WIN_LINES){
        const [a,b,c] = line;
        const v = state.board[a];
        if(v && v === state.board[b] && v === state.board[c]){
          return { over:true, winner:v, line };
        }
      }
      // ÙØ­Øµ ØªØ¹Ø§Ø¯Ù„
      const full = state.board.every(x => x !== "");
      if(full) return { over:true, winner:null, line:null };
      return { over:false, winner:null, line:null };
    }

    function endRound(result){
      state.locked = true;

      // ØªÙ…ÙŠÙŠØ² Ø®Ø· Ø§Ù„ÙÙˆØ²
      if(result.winner && result.line){
        const cells = boardEl.querySelectorAll(".cell");
        result.line.forEach(i => cells[i].classList.add("win"));
      }

      if(result.winner === "X"){
        state.stats.X++;
        setToast(`ğŸ‰ <strong>${escapeHtml(state.players.X)}</strong> ÙØ§Ø² Ø¨Ù€ <span style="color:var(--x);font-weight:1000;">X</span>!`, "good");
      }else if(result.winner === "O"){
        state.stats.O++;
        setToast(`ğŸ”¥ <strong>${escapeHtml(state.players.O)}</strong> ÙØ§Ø² Ø¨Ù€ <span style="color:var(--o);font-weight:1000;">O</span>!`, "good");
      }else{
        state.stats.draws++;
        setToast(`ğŸ¤ ØªØ¹Ø§Ø¯Ù„! Ø¬ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©ØŸ`, "normal");
      }

      render();
    }

    function resetRound(){
      state.board = Array(9).fill("");
      state.turn = "X";
      state.locked = false;

      // ØªÙ†Ø¸ÙŠÙ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù„ÙˆØ­Ø©
      const cells = boardEl.querySelectorAll(".cell");
      cells.forEach(c=>{
        c.textContent = "";
        c.classList.remove("win", "xTxt", "oTxt", "disabled");
      });

      render();
    }

    function fullReset(){
      state.stats.X = 0;
      state.stats.O = 0;
      state.stats.draws = 0;
      resetRound();
      setToast("ØªÙ…Øª Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙˆØ§Ù„Ø¬ÙˆÙ„Ø© âœ…", "good");
    }

    // ==========================
    // Ø°ÙƒØ§Ø¡ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± (Minimax)
    // ==========================
    // O = Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±ØŒ X = Ø§Ù„Ù„Ø§Ø¹Ø¨
    // Ù†Ø³ØªØ®Ø¯Ù… minimax Ø®ÙÙŠÙ Ù…Ø¹ ØªÙØ¶ÙŠÙ„ Ù„Ù„ÙÙˆØ² Ø§Ù„Ø³Ø±ÙŠØ¹
    function computeBestMove(){
      const board = state.board.slice();
      let bestScore = -Infinity;
      let bestMove = null;

      for(let i=0;i<9;i++){
        if(board[i] === ""){
          board[i] = "O";
          const score = minimax(board, 0, false);
          board[i] = "";
          if(score > bestScore){
            bestScore = score;
            bestMove = i;
          }
        }
      }

      // fallback
      if(bestMove === null){
        const empties = state.board.map((v,i)=> v==="" ? i : null).filter(v=>v!==null);
        return empties[Math.floor(Math.random()*empties.length)];
      }
      return bestMove;
    }

    function minimax(board, depth, isMax){
      const evalRes = evaluateBoardStatic(board);
      if(evalRes.over){
        if(evalRes.winner === "O") return 10 - depth;
        if(evalRes.winner === "X") return depth - 10;
        return 0;
      }

      // ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„ØªØ¹Ù‚ÙŠØ¯: Ø¹Ù…Ù‚ Ø£Ù‚ØµÙ‰ 8 ÙƒØ§ÙÙŠ Ù„Ù„Ù€ 3x3
      if(isMax){
        let best = -Infinity;
        for(let i=0;i<9;i++){
          if(board[i] === ""){
            board[i] = "O";
            best = Math.max(best, minimax(board, depth+1, false));
            board[i] = "";
          }
        }
        return best;
      }else{
        let best = Infinity;
        for(let i=0;i<9;i++){
          if(board[i] === ""){
            board[i] = "X";
            best = Math.min(best, minimax(board, depth+1, true));
            board[i] = "";
          }
        }
        return best;
      }
    }

    function evaluateBoardStatic(board){
      for(const line of WIN_LINES){
        const [a,b,c] = line;
        const v = board[a];
        if(v && v === board[b] && v === board[c]){
          return { over:true, winner:v };
        }
      }
      const full = board.every(x => x !== "");
      if(full) return { over:true, winner:null };
      return { over:false, winner:null };
    }

    // ==============
    // Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø£Ø²Ø±Ø§Ø±
    // ==============
    btnReplay.addEventListener("click", () => {
      resetRound();
      setToast("ØªÙ…Øª Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¬ÙˆÙ„Ø© âœ…", "good");
    });

    btnChangeNames.addEventListener("click", () => {
      startOverlay.classList.remove("hide");
      setToast("Ø¹Ø¯Ù‘Ù„ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ÙˆØ§Ø®ØªØ± Ø§Ù„ÙˆØ¶Ø¹ Ø«Ù… Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©.", "normal");
      // ØªØ­Ø¯ÙŠØ« placeholders
      setMode(state.mode);
      name1Input.value = state.players.X === "Ø§Ù„Ù„Ø§Ø¹Ø¨ 1" ? "" : state.players.X;
      if(state.mode === 1){
        name2Input.value = (state.players.O === "Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±") ? "" : state.players.O;
      }else{
        name2Input.value = state.players.O === "Ø§Ù„Ù„Ø§Ø¹Ø¨ 2" ? "" : state.players.O;
      }
    });

    btnNew.addEventListener("click", () => {
      resetRound();
      setToast("Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ù†ÙØ³ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ âœ…", "good");
    });

    btnReset.addEventListener("click", () => {
      fullReset();
    });

    // ==============
    // Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø©
    // ==============
    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    // Ø¨Ø¯Ø¡
    buildBoard();
    setMode(1);
    render();
  </script>
</body>
</html>
